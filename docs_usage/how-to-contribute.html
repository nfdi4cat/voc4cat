<!doctype html>
<html class="no-js" lang="en" data-content_root="../">
  <head><meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<meta content="Contribution guide for the Voc4Cat vocabulary: Learn how to request IDs, edit voc4cat.xlsx, and submit a PR with Excel updates." lang="en" name="description" xml:lang="en" />

    <meta property="article:modified_time" content="2026-02-23T23:40:16+00:00" /><link rel="index" title="Index" href="../genindex.html"><link rel="search" title="Search" href="../search.html"><link rel="next" title="Hierarchies, Relations, and Collections" href="organizing-concepts.html"><link rel="prev" title="How to use Voc4Cat?" href="how-to-use.html">
        <link rel="canonical" href="https://nfdi4cat.github.io/voc4cat/docs_usage/how-to-contribute.html">
        <link rel="prefetch" href="../_static/voc4cat-logo-light-mode.svg" as="image">
        <link rel="prefetch" href="../_static/voc4cat-logo-dark-mode.svg" as="image">

    <link rel="shortcut icon" href="../_static/favicon_32.png"><!-- Generated with Sphinx 8.2.3 and Furo 2025.12.19 -->
        <title>How to contribute to Voc4Cat? - Voc4Cat documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=d111a655" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=7bdb33bb" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=8dab3a3b" />
    
    


<style>
  body {
    --color-code-background: #f2f2f2;
  --color-code-foreground: #1e1e1e;
  --color-brand-primary: #016992;
  --color-brand-content: #016992;
  --color-announcement-background: #91c63f;
  --color-announcement-text: #000000;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-announcement-background: #91c63f;
  --color-announcement-text: #000000;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-announcement-background: #91c63f;
  --color-announcement-text: #000000;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle site navigation sidebar">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc" aria-label="Toggle table of contents sidebar">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>

<div class="announcement">
  <aside class="announcement-content">
     <em>New: <strong> Release 2026-02-24 </strong> - First release based on the improved <b>xlsx template v1.0</b> with provenance tracking, deprecation support and many other improvements.</em> 
  </aside>
</div>

<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <span class="icon"><svg><use href="#svg-menu"></use></svg></span>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">Voc4Cat  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  <div class="sidebar-logo-container">
    <img class="sidebar-logo only-light" src="../_static/voc4cat-logo-light-mode.svg" alt="Light Logo"/>
    <img class="sidebar-logo only-dark" src="../_static/voc4cat-logo-dark-mode.svg" alt="Dark Logo"/>
  </div>
  
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/nfdi4cat/voc4cat">GitHub page</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/orgs/nfdi4cat/projects/11">Kanban board</a></li>
<li class="toctree-l1"><a class="reference external" href="https://semanticlookup.zbmed.de/skosmos/voc4cat/">Skosmos (ZB MED)</a></li>
<li class="toctree-l1"><a class="reference internal" href="about.html">About</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For Users</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="how-to-use.html">How to use Voc4Cat?</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">How to contribute to Voc4Cat?</a></li>
<li class="toctree-l1"><a class="reference internal" href="organizing-concepts.html">Organizing Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="guidelines.html">Guidelines for Voc4Cat</a></li>
<li class="toctree-l1"><a class="reference internal" href="published-guidelines.html">Guidelines Publication</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">For Maintainers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../docs_maintenance/creating-docs-locally.html">Building the docs locally</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docs_maintenance/handling-ID-requests.html">Handling ID-requests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docs_maintenance/making-releases.html">Making Releases</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="edit-this-page">
  <a class="muted-link" href="https://github.com/nfdi4cat/voc4cat/edit/main/docs/docs_usage/how-to-contribute.md" rel="edit" title="Edit this page">
    <svg><use href="#svg-pencil"></use></svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="how-to-contribute-to-voc4cat">
<h1>How to contribute to Voc4Cat?<a class="headerlink" href="#how-to-contribute-to-voc4cat" title="Link to this heading">¶</a></h1>
<p>The contribution process is almost the same as in source code repositories.
Below we describe the steps in detail so that beginners without git or GitHub experience can follow.
The essentials of the contribution process are:</p>
<ol class="arabic simple">
<li><p><strong>Request a range of IDs</strong> (for new concepts): <a class="reference external" href="https://github.com/nfdi4cat/voc4cat/issues/new/choose">Create an issue</a></p></li>
<li><p><strong>Download</strong> the current vocabulary Excel file: <a class="reference external" href="https://nfdi4cat.github.io/voc4cat/dev/voc4cat.xlsx">voc4cat.xlsx</a></p></li>
<li><p><strong>Edit</strong> the Excel file to add/modify concepts</p></li>
<li><p><strong>Submit</strong> your Excel file in a pull request placing your changed <code class="docutils literal notranslate"><span class="pre">voc4cat.xlsx</span></code> in the <code class="docutils literal notranslate"><span class="pre">inbox-excel-vocabs/</span></code> folder (keep the filename)</p></li>
</ol>
<figure class="align-default" id="id1">
<img alt="GitHub contribution workflow and continuous integration pipeline" src="../_images/workflow.png" />
<figcaption>
<p><span class="caption-text"><strong>Vocabulary contribution workflow &amp; Continuous Integration (CI) Pipeline.</strong></span><a class="headerlink" href="#id1" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<section id="step-by-step-contribution-guide">
<h2>Step-by-step contribution guide<a class="headerlink" href="#step-by-step-contribution-guide" title="Link to this heading">¶</a></h2>
<p>The main steps that a community member needs to follow to contribute to
Voc4Cat are illustrated in the diagrams below.</p>
<p>Steps 1-4 are performed only once and are intended to set up the GitHub environment for the contributor.</p>
<pre  class="mermaid">
        flowchart LR
  A1[Step 1&lt;br&gt;Create GitHub&lt;br&gt;account] --&gt; A2[Step 2&lt;br&gt;Access&lt;br&gt;repository] --&gt; A3[Step 3&lt;br&gt;Request&lt;br&gt;ID range] --&gt; A4[Step 4&lt;br&gt;Fork repository&lt;br&gt;set up remotes]
    </pre><p>The actual vocabulary contribution process involves steps 5-7 which are repeated
with each new submission.</p>
<pre  class="mermaid">
        flowchart LR
  B5[Step 5&lt;br&gt;Get latest Excel template] --&gt; B6[Step 6&lt;br&gt;Edit concepts in Excel] --&gt; B7[Step 7&lt;br&gt;Open PR and iterate]
    </pre><p>What happens during the contribution steps is visualized in the next figure.</p>
<section id="initial-steps-one-time">
<h3>Initial steps (one-time)<a class="headerlink" href="#initial-steps-one-time" title="Link to this heading">¶</a></h3>
<section id="step-1-create-a-github-account">
<h4>Step 1 – Create a GitHub account<a class="headerlink" href="#step-1-create-a-github-account" title="Link to this heading">¶</a></h4>
<p>This step happens in the browser only. No commands. Visit <a class="reference external" href="https://github.com/">github.com</a> and create a personal account.</p>
<div class="admonition caution">
<p class="admonition-title">Caution</p>
<p>It is essential to use a <em>personal GitHub account</em>. Contributing from organization accounts does not work due to GitHub limitations (status Nov-2025, see <a class="reference external" href="https://github.com/orgs/community/discussions/5634">discussion</a>).</p>
</div>
</section>
<section id="step-2-access-the-voc4cat-repository">
<h4>Step 2 – Access the Voc4Cat repository<a class="headerlink" href="#step-2-access-the-voc4cat-repository" title="Link to this heading">¶</a></h4>
<p>While signed in, open the repository of Voc4Cat <a class="reference external" href="https://github.com/nfdi4cat/voc4cat">https://github.com/nfdi4cat/voc4cat</a>. Familiarize yourself with the README and existing issues.</p>
<p>Contributing or participating in discussions requires you to be signed in with your personal GitHub account.</p>
</section>
<section id="step-3-request-an-id-range">
<h4>Step 3 – Request an ID range<a class="headerlink" href="#step-3-request-an-id-range" title="Link to this heading">¶</a></h4>
<p>You will need unique IDs for each new concept that you want to add to Voc4Cat.</p>
<p>Voc4cat gives each user their personal ID range(s) to pick IDs from.
This way contributions can happen asynchronously without needing additional coordination between users.</p>
<p>While on the Voc4Cat repository page <a class="reference external" href="https://github.com/nfdi4cat/voc4cat">https://github.com/nfdi4cat/voc4cat</a>,</p>
<ul class="simple">
<li><p>click on <em>Issues</em> (top left corner), then</p></li>
<li><p>click on <em>New issue</em> (green button on the top right corner)</p></li>
<li><p>finally click on the “<em>Request a range of IDs</em>” option.</p></li>
</ul>
<p>This opens a dialog window:</p>
<ul class="simple">
<li><p>Enter the number of IDs that you need for new concepts.
The number does not have to be exact.
Request enough if you plan several contributions in the future (typical numbers are 10…100).</p></li>
<li><p>Add your <em>Open Researcher and Contributor ID</em> (<a class="reference external" href="https://orcid.org/">ORCID identifier</a>).
This is optional but recommended.</p></li>
<li><p>Add the <em>Research Organization Registry</em> (<a class="reference external" href="https://www.ror.org">ROR</a>) identifier of the organization you work for.</p></li>
<li><p>Add any additional information that you deem necessary such as what you plan to work on.</p></li>
</ul>
</section>
<section id="step-4-fork-the-repository">
<h4>Step 4 – Fork the repository<a class="headerlink" href="#step-4-fork-the-repository" title="Link to this heading">¶</a></h4>
<p>Copying (”<em>forking</em>”) Voc4Cat’s repository to your workspace allows modifications independent of the original repository.
Forking is an essential step in GitHub´s collaborative development model.</p>
<p>To fork Voc4Cat, while being logged in,</p>
<ul class="simple">
<li><p>Navigate to the <a class="reference external" href="https://github.com/nfdi4cat/voc4cat">nfdi4cat/voc4cat</a> repository.</p></li>
<li><p>Click on the <em>Fork</em> button (top right corner).</p></li>
</ul>
<p>After creation, your fork will be available as new repository in your workspace at <code class="docutils literal notranslate"><span class="pre">https://github.com/&lt;your_username&gt;/voc4cat</span></code>.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-0" name="sd-tab-set-0" type="radio">
<label class="sd-tab-label" data-sync-group="tab" data-sync-id="Git commands" for="sd-tab-item-0">
Git commands</label><div class="sd-tab-content docutils">
<p>To prepare for contributing from your local computer</p>
<ol class="arabic simple">
<li><p>Clone your fork:</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/&lt;your_username&gt;/voc4cat.git
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Add “upstream” remote:</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span><span class="w"> </span>voc4cat
git<span class="w"> </span>remote<span class="w"> </span>add<span class="w"> </span>upstream<span class="w"> </span>https://github.com/nfdi4cat/voc4cat.git
</pre></div>
</div>
</div>
<input id="sd-tab-item-1" name="sd-tab-set-0" type="radio">
<label class="sd-tab-label" data-sync-group="tab" data-sync-id="GitHub Web UI" for="sd-tab-item-1">
GitHub Web UI</label><div class="sd-tab-content docutils">
<p><em>No action required.</em></p>
</div>
</div>
</section>
</section>
<section id="steps-for-every-contribution">
<h3>Steps for every contribution<a class="headerlink" href="#steps-for-every-contribution" title="Link to this heading">¶</a></h3>
<section id="step-5-get-the-latest-versions">
<h4>Step 5 – Get the latest versions<a class="headerlink" href="#step-5-get-the-latest-versions" title="Link to this heading">¶</a></h4>
<p>First, <strong>download the current version of Voc4Cat as xlsx (Excel) file</strong>.
Go to the <a class="reference external" href="https://nfdi4cat.github.io/voc4cat/">voc4cat-homepage</a>, and download the file by clicking on the middle <em>Vocabulary card</em>
(or use this direct <a class="reference external" href="https://nfdi4cat.github.io/voc4cat/dev/voc4cat.xlsx">download link</a>).</p>
<p>Second you have to <strong>update your voc4cat-fork</strong>.
While not essential it is strongly recommended that the vocabulary stored in the repository as RDF/turtle files matches the concepts stored in the downloaded xlsx file.</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-2" name="sd-tab-set-1" type="radio">
<label class="sd-tab-label" data-sync-group="tab" data-sync-id="Git commands" for="sd-tab-item-2">
Git commands</label><div class="sd-tab-content docutils">
<p>From the root directory of your cloned repo:</p>
<ol class="arabic simple">
<li><p>Update local main:</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>fetch<span class="w"> </span>upstream<span class="w"> </span>--tags
git<span class="w"> </span>switch<span class="w"> </span>main
git<span class="w"> </span>pull<span class="w"> </span>upstream<span class="w"> </span>main<span class="sb">`</span>
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Create a feature branch for the contribution (reference the issue solved by the PR):</p></li>
</ol>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="w">  </span>git<span class="w"> </span>switch<span class="w"> </span>-c<span class="w"> </span>issue###_&lt;short_topic&gt;<span class="sb">`</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Place the freshly download voc4cat xlsx-file in <code class="docutils literal notranslate"><span class="pre">inbox-excel-vocabs/voc4cat.xlsx</span></code>. Do not change the filename.</p></li>
</ol>
</div>
<input id="sd-tab-item-3" name="sd-tab-set-1" type="radio">
<label class="sd-tab-label" data-sync-group="tab" data-sync-id="GitHub Web UI" for="sd-tab-item-3">
GitHub Web UI</label><div class="sd-tab-content docutils">
<ol class="arabic simple">
<li><p>Open your fork of voc4cat <a class="reference external" href="https://github.com/your_username/voc4cat">https://github.com/your_username/voc4cat</a> in the browser.</p></li>
<li><p>Sync your fork with upstream nfdi4cat/voc4cat. Press the green “Sync fork” button which makes your fork/clone an exact copy of upstream <code class="docutils literal notranslate"><span class="pre">main</span></code> again (nfdi4cat/voc4cat). If this fails, see <a class="reference internal" href="#troubleshooting"><span class="std std-ref">Troubleshooting</span></a>.</p></li>
</ol>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-icon"><svg version="1.1" width="1.0em" height="1.0em" class="sd-octicon sd-octicon-copilot-warning" viewBox="0 0 16 16" aria-hidden="true"><path d="M8.498 14.811a4.53 4.53 0 0 1-1.161-1.337 4.476 4.476 0 0 1-.587-2.224 4.496 4.496 0 0 1 4.5-4.5 4.5 4.5 0 0 1 4.5 4.5 4.5 4.5 0 0 1-7.252 3.561ZM10.5 8.75V11a.75.75 0 0 0 1.5 0V8.75a.75.75 0 1 0-1.5 0Zm.75 5.75a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z"></path><path d="m14.354 6.114-.05-.029a5.949 5.949 0 0 0-1.351-.589c.03-.19.047-.422.047-.709 0-.765-.123-1.242-.37-1.554-.233-.296-.693-.587-1.713-.7-1.044-.116-1.488.091-1.681.297-.204.219-.359.679-.242 1.614.058.462.165.834.316 1.127A6.025 6.025 0 0 0 6.369 7.76c-.472.185-1.015.277-1.623.277-.652 0-1.236-.081-1.727-.291l-.023.116v4.255c.265.205 1.285.725 2.577 1.079a5.937 5.937 0 0 0 .939 1.736C2.733 14.407.111 12.027 0 11.286V9.338c.085-.628.677-1.686 1.588-2.065.013-.07.024-.143.036-.218.029-.183.06-.384.126-.612-.201-.508-.254-1.084-.254-1.656 0-.87.128-1.769.693-2.484.579-.733 1.494-1.124 2.724-1.261 1.206-.134 2.262.034 2.944.765.05.053.096.108.139.165.044-.057.094-.112.143-.165.682-.731 1.738-.899 2.944-.765 1.23.137 2.145.528 2.724 1.261.566.715.693 1.614.693 2.484 0 .452-.033.906-.146 1.327ZM6.762 2.83c-.193-.206-.637-.413-1.682-.297-1.019.113-1.479.404-1.713.7-.247.312-.369.789-.369 1.554 0 .793.129 1.171.308 1.371.162.181.519.379 1.442.379.853 0 1.339-.235 1.638-.54.315-.322.527-.827.617-1.553.117-.935-.037-1.395-.241-1.614Z"></path></svg></span><span class="sd-summary-text">Be careful when you “<em>Sync fork</em>” in GitHub UI.</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text"><strong>It should look like this screenshot.</strong> Your main branch should only be behind the forked repository (not ahead of it).</p>
<p class="sd-card-text"><img alt="" src="../_images/fork_behind_forked_repo.png" /></p>
<p class="sd-card-text"><strong>If your main-branch is ahead of main in the forked repo, do not press “<em>Sync fork</em>”</strong> but go to <a class="reference internal" href="#troubleshooting"><span class="std std-ref">Troubleshooting</span></a>.</p>
<p class="sd-card-text"><img alt="" src="../_images/fork_ahead_forked_repo_conflict_case.png" /></p>
</div>
</details></div>
</div>
</section>
<section id="step-6-add-edit-concepts-in-excel">
<h4>Step 6 – Add / edit concepts in Excel<a class="headerlink" href="#step-6-add-edit-concepts-in-excel" title="Link to this heading">¶</a></h4>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><strong>New in v1.0</strong> The xlsx template has been improved based on contributor feedback:
clearer structure with a dedicated Mappings sheet,
built-in <strong>provenance tracking</strong> and <strong>deprecation support</strong>,
and read-only info sheets (<strong>ID Ranges</strong>, <strong>Prefixes</strong>) so you always have context at hand.</p>
</div>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-text">Introduction to the xlsx vocabulary file (click to unfold).</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">The downloaded Excel file has the following sheets:</p>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p class="sd-card-text">Sheet</p></th>
<th class="head"><p class="sd-card-text">Editable?</p></th>
<th class="head"><p class="sd-card-text">Purpose</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p class="sd-card-text">Introduction</p></td>
<td><p class="sd-card-text">Read-only</p></td>
<td><p class="sd-card-text">Template version, links to documentation and resources</p></td>
</tr>
<tr class="row-odd"><td><p class="sd-card-text">Concept Scheme</p></td>
<td><p class="sd-card-text">Read-only</p></td>
<td><p class="sd-card-text">Vocabulary metadata (auto-generated from <code class="docutils literal notranslate"><span class="pre">idranges.toml</span></code>)</p></td>
</tr>
<tr class="row-even"><td><p class="sd-card-text"><strong>Concepts</strong></p></td>
<td><p class="sd-card-text"><strong>Editable</strong></p></td>
<td><p class="sd-card-text">Concept definitions — primary editing sheet</p></td>
</tr>
<tr class="row-odd"><td><p class="sd-card-text"><strong>Collections</strong></p></td>
<td><p class="sd-card-text"><strong>Editable</strong></p></td>
<td><p class="sd-card-text">Concept groupings with language support</p></td>
</tr>
<tr class="row-even"><td><p class="sd-card-text"><strong>Mappings</strong></p></td>
<td><p class="sd-card-text"><strong>Editable</strong></p></td>
<td><p class="sd-card-text">Links to external vocabularies (SKOS mapping properties)</p></td>
</tr>
<tr class="row-odd"><td><p class="sd-card-text">ID Ranges</p></td>
<td><p class="sd-card-text">Read-only</p></td>
<td><p class="sd-card-text">Contributor ID allocations (from <code class="docutils literal notranslate"><span class="pre">idranges.toml</span></code>)</p></td>
</tr>
<tr class="row-even"><td><p class="sd-card-text">Prefixes</p></td>
<td><p class="sd-card-text">Read-only</p></td>
<td><p class="sd-card-text">Namespace prefix mappings (from <code class="docutils literal notranslate"><span class="pre">idranges.toml</span></code> and rdflib)</p></td>
</tr>
</tbody>
</table>
</div>
<p class="sd-card-text">The read-only sheets are auto-generated by the CI pipeline from <code class="docutils literal notranslate"><span class="pre">idranges.toml</span></code> and git history. They provide useful context but should not be edited — any manual changes will be overwritten.</p>
<p class="rubric" id="concepts-sheet">Concepts sheet</p>
<p class="sd-card-text">The <em>Concepts</em> sheet is where most contributions are made.
Detailed descriptions on how to properly fill these columns can be found
in the <a class="reference internal" href="guidelines.html"><span class="std std-doc">guidelines</span></a>.</p>
<p class="sd-card-text">Fields that accept multiple IRIs use <strong>line breaks within the cell</strong> (Alt+Enter in Excel) to separate values.</p>
<p class="sd-card-text">The columns are:</p>
<ol class="arabic simple">
<li><p class="sd-card-text"><strong>Concept IRI</strong> <em>(required)</em>: Must be a valid IRI based on the
vocabulary namespace. For new contributions the ID must be within
your requested ID range.</p></li>
<li><p class="sd-card-text"><strong>Language Code</strong> <em>(required)</em>: Two or three letter language code
according to ISO 639-2 or 639-3. Applies to both <em>Preferred Label</em>
and <em>Definition</em>. If no language code is given, “en” is assumed
(English). Translations of a concept into different languages use
the same IRI but occupy different rows. For example, “heterogeneous
catalysis” has English and German translations sharing the same
concept IRI (voc4cat:0007001):</p></li>
</ol>
<table>
<colgroup>
<col style=”width: 22%” />
<col style=”width: 12%” />
<col style=”width: 20%” />
<col style=”width: 46%” />
</colgroup>
<tbody>
<tr>
<td style=”text-align: center;”><strong>Concept IRI</strong></td>
<td style=”text-align: center;”><strong>Language Code</strong></td>
<td style=”text-align: center;”><strong>Preferred Label</strong></td>
<td style=”text-align: center;”><strong>Definition</strong></td>
</tr>
<tr>
<td style=”text-align: center;”>voc4cat:0007001</td>
<td style=”text-align: center;”>en</td>
<td style=”text-align: center;”>heterogeneous catalysis</td>
<td style=”text-align: left;”>A process during which a chemical reaction
is accelerated by the presence of a catalyst in a different phase than
the reactant. The reaction generally proceeds at the interface.</td>
</tr>
<tr>
<td style=”text-align: center;”>voc4cat:0007001</td>
<td style=”text-align: center;”>de</td>
<td style=”text-align: center;”>heterogene Katalyse</td>
<td style=”text-align: left;”>Ein Prozess, bei dem eine chemische
Reaktion durch das Vorhandensein eines Katalysators in einer anderen
Phase als der Reaktant beschleunigt wird. Die Reaktion findet im
Allgemeinen an der Grenzfläche statt.</td>
</tr>
</tbody>
</table>
<ol class="arabic simple" start="3">
<li><p class="sd-card-text"><strong>Preferred Label</strong> <em>(required)</em>: A simple one-line label for the concept.</p></li>
<li><p class="sd-card-text"><strong>Definition</strong> <em>(required)</em>: The defining description of the <em>Concept</em>.</p></li>
<li><p class="sd-card-text"><strong>Alternate Labels</strong> <em>(optional)</em>: Any other names for this <em>Concept</em>,
separated by vertical bar “|”. To include a vertcial bar in a label, escape it with “\” like in: “one\|two”.</p></li>
<li><p class="sd-card-text"><strong>Parent IRIs</strong> <em>(optional)</em>: IRIs of parent concepts, one per line.
This creates a hierarchical relationship: the <em>Concept</em> is narrower
than its parent, and the parent is broader than the <em>Concept</em>
(in SKOS terminology). Note that broader/narrower are not transitive.</p></li>
<li><p class="sd-card-text"><strong>Member of collection(s)</strong> <em>(optional)</em>: Assign this concept to one
or more collections by collection IRI, one per line.</p></li>
<li><p class="sd-card-text"><strong>Member of ordered collection # position</strong> <em>(optional)</em>: Position
number within an ordered collection.</p></li>
<li><p class="sd-card-text"><strong>Provenance</strong> <em>(read-only)</em>: Auto-populated by the CI pipeline with
<code class="docutils literal notranslate"><span class="pre">dct:created</span></code> and <code class="docutils literal notranslate"><span class="pre">dct:modified</span></code> dates from git history. Do not edit
this column manually.</p></li>
<li><p class="sd-card-text"><strong>Change Note</strong> <em>(optional)</em>: A note documenting changes to the
concept (<code class="docutils literal notranslate"><span class="pre">skos:changeNote</span></code>). Use this for general provenance remarks
such as “definition aligned with RXN ontology”.</p></li>
<li><p class="sd-card-text"><strong>Editorial Note</strong> <em>(optional)</em>: Internal notes for editors and
curators (<code class="docutils literal notranslate"><span class="pre">skos:editorialNote</span></code>). Not shown in the public vocabulary
documentation.</p></li>
<li><p class="sd-card-text"><strong>Influenced by IRIs</strong> <em>(optional)</em>: IRIs of resources that
influenced the definition (<code class="docutils literal notranslate"><span class="pre">prov:wasInfluencedBy</span></code>), one per line.
Use when a definition draws on multiple sources without being a
direct copy.</p></li>
<li><p class="sd-card-text"><strong>Source Vocab IRI or URL</strong> <em>(optional)</em>: If this concept’s
definition originates from another vocabulary, provide the IRI or
URL of the source concept (<code class="docutils literal notranslate"><span class="pre">prov:hadPrimarySource</span></code>). Before
including content from other sources, make sure that such re-use
is permitted by their license.</p></li>
<li><p class="sd-card-text"><strong>Source Vocab License</strong> <em>(optional)</em>: The license of the source
vocabulary (<code class="docutils literal notranslate"><span class="pre">dct:license</span></code>), e.g. “CC BY 4.0”.</p></li>
<li><p class="sd-card-text"><strong>Source Vocab Rights Holder</strong> <em>(optional)</em>: The rights holder of
the source vocabulary (<code class="docutils literal notranslate"><span class="pre">dct:rightsHolder</span></code>).</p></li>
<li><p class="sd-card-text"><strong>Obsoletion reason</strong> <em>(optional)</em>: If this concept is being
deprecated, select a reason from the dropdown. Sets <code class="docutils literal notranslate"><span class="pre">owl:deprecated</span></code>
to true and records a <code class="docutils literal notranslate"><span class="pre">skos:historyNote</span></code> with the obsoletion reason.</p></li>
<li><p class="sd-card-text"><strong>dct:isReplacedBy</strong> <em>(optional)</em>: When deprecating a concept,
provide the IRI of the replacement concept.</p></li>
</ol>
<p class="rubric" id="provenance-and-citation">Provenance and citation</p>
<p class="sd-card-text">Voc4Cat tracks provenance at multiple levels:</p>
<ul class="simple">
<li><p class="sd-card-text"><strong>Automatic provenance</strong> (Provenance column): The CI pipeline
automatically records creation and modification dates from git
history. This column is read-only.</p></li>
<li><p class="sd-card-text"><strong>Change notes</strong> (Change Note column): Use this to document the
rationale for changes, e.g. “definition aligned with IUPAC Gold Book
entry for catalysis”.</p></li>
<li><p class="sd-card-text"><strong>Source citation</strong> (Source Vocab IRI or URL, Source Vocab License,
Source Vocab Rights Holder): When borrowing a definition from another
vocabulary, fill these three columns to give proper attribution.</p></li>
</ul>
<div class="tip admonition">
<p class="admonition-title">Example — citing a source vocabulary</p>
<p class="sd-card-text">When adding a concept whose definition is taken from another vocabulary,
fill the citation columns as follows:</p>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p class="sd-card-text">Column</p></th>
<th class="head"><p class="sd-card-text">Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p class="sd-card-text">Source Vocab IRI or URL</p></td>
<td><p class="sd-card-text"><code class="docutils literal notranslate"><span class="pre">https://purl.obolibrary.org/obo/RXNO_0000272</span></code></p></td>
</tr>
<tr class="row-odd"><td><p class="sd-card-text">Source Vocab License</p></td>
<td><p class="sd-card-text"><code class="docutils literal notranslate"><span class="pre">CC</span> <span class="pre">BY</span> <span class="pre">4.0</span></code></p></td>
</tr>
<tr class="row-even"><td><p class="sd-card-text">Source Vocab Rights Holder</p></td>
<td><p class="sd-card-text"><code class="docutils literal notranslate"><span class="pre">Royal</span> <span class="pre">Society</span> <span class="pre">of</span> <span class="pre">Chemistry</span></code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<p class="rubric" id="collections-sheet">Collections sheet</p>
<p class="sd-card-text">Collections group concepts for various purposes.</p>
<ol class="arabic simple">
<li><p class="sd-card-text"><strong>Collection IRI</strong> <em>(required)</em>: The IRI of the collection.</p></li>
<li><p class="sd-card-text"><strong>Language Code</strong> <em>(required)</em>: Two or three letter language code
(ISO 639-2/639-3) for the label and definition.</p></li>
<li><p class="sd-card-text"><strong>Preferred Label</strong> <em>(required)</em>: A one-line title for the collection.</p></li>
<li><p class="sd-card-text"><strong>Definition</strong> <em>(required)</em>: A description of the collection.</p></li>
<li><p class="sd-card-text"><strong>Parent Collection IRIs</strong> <em>(optional)</em>: IRIs of parent collections
(one per line), for nesting collections hierarchically.</p></li>
<li><p class="sd-card-text"><strong>Ordered?</strong> <em>(optional)</em>: Set to “Yes” if the collection members
have a meaningful order. Default is “No”.</p></li>
<li><p class="sd-card-text"><strong>Provenance</strong> <em>(read-only)</em>: Auto-populated by CI.</p></li>
<li><p class="sd-card-text"><strong>Change Note</strong> <em>(optional)</em>: Document changes to the collection.</p></li>
<li><p class="sd-card-text"><strong>Editorial Note</strong> <em>(optional)</em>: Internal notes for editors.</p></li>
<li><p class="sd-card-text"><strong>Obsoletion reason</strong> <em>(optional)</em>: For deprecating a collection.</p></li>
<li><p class="sd-card-text"><strong>dct:isReplacedBy</strong> <em>(optional)</em>: IRI of the replacement collection.</p></li>
</ol>
<p class="sd-card-text">Note that collection membership is assigned from the <strong>Concepts</strong> sheet
(via the “Member of collection(s)” column), not from the Collections
sheet. This is a change from older template versions where membership
was defined via a “Member IRIs” column in Collections.</p>
<p class="rubric" id="mappings-sheet">Mappings sheet</p>
<p class="sd-card-text">The Mappings sheet links Voc4Cat concepts to concepts in external
vocabularies using SKOS mapping properties. For guidance on choosing the
right mapping type, see the <a class="reference internal" href="guidelines.html#mappings"><span class="std std-ref">Mappings section in the guidelines</span></a>.</p>
<ol class="arabic simple">
<li><p class="sd-card-text"><strong>Concept IRI</strong> <em>(required)</em>: The IRI of the Voc4Cat concept to map.</p></li>
<li><p class="sd-card-text"><strong>Related Matches</strong> <em>(optional)</em>: IRIs of related concepts in other vocabularies.</p></li>
<li><p class="sd-card-text"><strong>Close Matches</strong> <em>(optional)</em>: IRIs of closely similar concepts.</p></li>
<li><p class="sd-card-text"><strong>Exact Matches</strong> <em>(optional)</em>: IRIs of equivalent concepts (transitive).</p></li>
<li><p class="sd-card-text"><strong>Narrower Matches</strong> <em>(optional)</em>: IRIs of narrower concepts in other vocabularies.</p></li>
<li><p class="sd-card-text"><strong>Broader Matches</strong> <em>(optional)</em>: IRIs of broader concepts in other vocabularies.</p></li>
<li><p class="sd-card-text"><strong>Editorial Note</strong> <em>(optional)</em>: Notes about the mappings for editors.</p></li>
</ol>
<p class="sd-card-text">Multiple IRIs in a single cell are separated by line breaks (one per line).</p>
</div>
</details><p>Edit the xlsx vocabulary file locally in your spreadsheet program of choice.
Follow the <a class="reference internal" href="guidelines.html"><span class="std std-doc">Guidelines</span></a> page.
These guidelines for suggesting, adding, and editing content to Voc4Cat guarantee consistency and coherence in the selection and structuring of concepts.</p>
<p><strong>Vocabulary xlsx file rules</strong></p>
<ul class="simple">
<li><p>Provide clear definition text (concise, domain-relevant).</p></li>
<li><p>Keep changes focussed. Solve one issue or add/edit a set of strongly related concepts.</p></li>
<li><p>Not more than 20 new concepts per PR. This keeps the review process manageable for you and the curators. Less is better!</p></li>
<li><p>Do not change the Excel template structure (sheet names, header rows, column order).</p></li>
</ul>
</section>
<section id="step-7-create-iterate-on-the-pull-request">
<h4>Step 7 – Create &amp; iterate on the Pull Request<a class="headerlink" href="#step-7-create-iterate-on-the-pull-request" title="Link to this heading">¶</a></h4>
<p>After you finished the additions and edits in the Voc4Cat xlsx file,
the update file can be submitted. This happens in a “<em>Pull request</em>”.</p>
<p>Make sure that you are in your fork .</p>
<div class="sd-tab-set docutils">
<input checked="checked" id="sd-tab-item-4" name="sd-tab-set-2" type="radio">
<label class="sd-tab-label" data-sync-group="tab" data-sync-id="Git commands" for="sd-tab-item-4">
Git commands</label><div class="sd-tab-content docutils">
<p>Add and commit the xlsx file to your local feature branch.
If you changed other files as part of your contribution, <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">add</span></code> them as well (before commit).</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>add<span class="w"> </span>inbox-excel-vocabs/voc4cat.xlsx
git<span class="w"> </span>commit<span class="w"> </span>-m<span class="w"> </span><span class="s2">&quot;A meaningful commit message&quot;</span>
</pre></div>
</div>
<p>Push the branch to GitHub (first time):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>push<span class="w"> </span>-set-upstream<span class="w"> </span>origin<span class="w"> </span>&lt;your-feature-branch-name&gt;
</pre></div>
</div>
<p>and for later updates:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>push
</pre></div>
</div>
</div>
<input id="sd-tab-item-5" name="sd-tab-set-2" type="radio">
<label class="sd-tab-label" data-sync-group="tab" data-sync-id="GitHub Web UI" for="sd-tab-item-5">
GitHub Web UI</label><div class="sd-tab-content docutils">
<ul class="simple">
<li><p>Open the GitHub page of your fork <code class="docutils literal notranslate"><span class="pre">https://github.com/&lt;your_username&gt;/voc4cat</span></code> and - if you already created a branch for your contribution - switch to the branch.</p></li>
<li><p>Open the “inbox-excel-vocabs” folder</p></li>
<li><p>Click click on the “<em>Add file</em>” then “<em>Upload files</em>” to open a file submission page.</p></li>
<li><p>Upload the voc4cat.xlsx file (the file name must be exactly this).</p></li>
<li><p>Commit the uploaded file making sure that you <strong>commit to your feature-branch</strong> (not <code class="docutils literal notranslate"><span class="pre">main</span></code>).
If you have to create a new branch, you may change the default name to a more reasonable name describing your contribution in the form <code class="docutils literal notranslate"><span class="pre">issue###_&lt;short_title&gt;</span></code>.</p></li>
</ul>
</div>
</div>
<p><strong>Create the pull request</strong></p>
<p>The easiest way is go to the original <a class="reference external" href="https://github.com/nfdi4cat/voc4cat">nfdi4cat/voc4cat</a> repository.
A notification will show up (1st screenshot).
After clicking on “Compare &amp; pull request” you will be asked about the source and target of your PR.
Verify that the defaults are correct (2nd screenshot).
If the selection box on the left does not show the upstream voc4cat repository, click on the “compare across forks” link to switch the view.</p>
<figure class="align-default" id="id2">
<img alt="Screenshot of GitHub UI suggesting to create a PR from your fork" src="../_images/create-pr-msg.png" />
<figcaption>
<p><span class="caption-text">Vocabulary contribution workflow &amp; Continuous Integration (CI) Pipeline</span><a class="headerlink" href="#id2" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<figure class="align-default" id="id3">
<img alt="Screenshot of GitHub UI with the correct selection of source and target branch for your PR" src="../_images/selecting-source-and-target-branch-for-pr.png" />
<figcaption>
<p><span class="caption-text">Check that the source is your feature branch and the target is <code class="docutils literal notranslate"><span class="pre">nfdi4cat/voc4cat</span></code></span><a class="headerlink" href="#id3" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>Here are some points to check before you finally submit the PR:</p>
<ul class="simple">
<li><p>PR title and description summarize motivation and scope.</p></li>
<li><p>Vocabulary file is <code class="docutils literal notranslate"><span class="pre">inbox-excel-vocabs/voc4cat.xlsx</span></code> (name and path unchanged).</p></li>
<li><p>IDs of added concepts are within my allocated range.</p></li>
<li><p>Each concept has prefLabel, definition, and a broader chain to a top concept.</p></li>
<li><p>Contribution is focused/small enough for review (split if needed).</p></li>
<li><p>No <code class="docutils literal notranslate"><span class="pre">.ttl</span></code> files edited.</p></li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Open your PR as “Draft” if you want early feedback. Mention any specific questions. Curators are informed automatically about every new PR, also drafts.</p>
</div>
<p><strong>What happens next?</strong></p>
<p>When the PR is submitted, an automated Continuous Integration (CI) pipeline is triggered.
The pipeline first checks the submitted Excel file for various errors.</p>
<p>If errors are detected, github reports the failed job with a red cross, see example</p>
<p><img alt="GitHub Screenshot of action failure" src="../_images/PR-action-failure.png" /></p>
<p>To find out more about the reasons for the failure, click on the red cross ❌.
This brings you to a page with a run log that typically gives enough information to understand the reason for the failure.
In addition to the run log, we also create a so called job artifact which can be accessed by going to the job “<em>Summary</em>” from the run log page.
The artifact is a zip-file with several files that help to diagnose the source of the failure. It contains:</p>
<ul class="simple">
<li><p>log-file of the run</p></li>
<li><p>xlsx vocabulary file enriched with error information in the failing row (for some errors).</p></li>
<li><p>HTML vocabulary documentation (useful to check the broader/narrower hierarchy)</p></li>
</ul>
<p>If the run succeeded you see a similar job message but with a green checkmark:
<img alt="GitHub Screenshot of action success" src="../_images/succesful-job-with-ttl-commit.png" /></p>
<p>The second line with the GitHub icon is a commit created by the pipeline in which</p>
<ul class="simple">
<li><p>the xlsx vocabulary file gets removed and</p></li>
<li><p>the RDF/turtle (ttl-files) with the SKOS representation are added.</p></li>
</ul>
<p>If you work on a local checkout on you computer, you need to pull this commit made on GitHub to your local clone with <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">pull</span></code>.</p>
<p><strong>Later updates on your PR</strong></p>
<p>For updates: Switch to the previously created feature branch, fix the xlsx file (or other files) Excel, commit and push it again.</p>
</section>
<section id="after-merge">
<h4>After merge<a class="headerlink" href="#after-merge" title="Link to this heading">¶</a></h4>
<p>CI builds and publishes the updated development version.</p>
<ul class="simple">
<li><p>Go to the <a class="reference external" href="https://nfdi4cat.github.io/voc4cat/">homepage</a> which is now updated with your contribution.</p></li>
<li><p>Download new Excel if planning further contributions.</p></li>
</ul>
<p>Note that this development version is not published to Skosmos at ZB Med or the TIB Technology service. Only releases are published to these services.</p>
</section>
</section>
</section>
<section id="contributing-to-the-homepage">
<h2>Contributing to the homepage<a class="headerlink" href="#contributing-to-the-homepage" title="Link to this heading">¶</a></h2>
<p>We use <a class="reference external" href="https://www.sphinx-doc.org/">Sphinx</a> as documentation builder with the <a class="reference external" href="https://github.com/pradyunsg/furo">furo</a> theme
and <a class="reference external" href="https://mystmd.org/">MySt</a> to support extended markdown.</p>
<p>To get an overview about the styling features supported visit the <a class="reference external" href="https://pradyunsg.me/furo/kitchen-sink/">furo theme documentation</a>
or the <a class="reference external" href="https://mystmd.org/guide/typography">MyST authoring documentation</a>.</p>
<p>To help you checking your changes before making a pull request, we provide instructions how to <a class="reference internal" href="../docs_maintenance/creating-docs-locally.html"><span class="std std-doc">build the documentation locally</span></a>.</p>
</section>
<section id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Link to this heading">¶</a></h2>
<ul>
<li><p><strong>Fork out-of-sync</strong> If you ever committed to the main branch in your repository directly, your history is no longer the same as in the upstream voc4cat.
This is a problem because it creates a merge conflict.
The fix is to reset your main match the upstream one exctly.
You can do this via the following git command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>fetch<span class="w"> </span>upstream
git<span class="w"> </span>reset<span class="w"> </span>--hard<span class="w"> </span>upstream/main
git<span class="w"> </span>push<span class="w"> </span>--force
</pre></div>
</div>
</li>
</ul>
</section>
<section id="questions-or-issues">
<h2>Questions or issues?<a class="headerlink" href="#questions-or-issues" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>Vocabulary discussions: <a class="reference external" href="https://github.com/nfdi4cat/voc4cat/issues">https://github.com/nfdi4cat/voc4cat/issues</a></p></li>
<li><p>Tooling improvements (voc4cat-tool): <a class="reference external" href="https://github.com/nfdi4cat/voc4cat-tool/issues">https://github.com/nfdi4cat/voc4cat-tool/issues</a></p></li>
<li><p>Template feedback (voc4cat-template): <a class="reference external" href="https://github.com/nfdi4cat/voc4cat-template/issues">https://github.com/nfdi4cat/voc4cat-template/issues</a></p></li>
</ul>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="organizing-concepts.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Hierarchies, Relations, and Collections</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="how-to-use.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">How to use Voc4Cat?</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2024, Voc4Cat contributors
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            <div class="last-updated">
              Last updated on 2026-02-23</div>
          </div>
          <div class="right-details">
            <div class="icons">
              <a class="muted-link " href="https://github.com/nfdi4cat/voc4cat" aria-label="GitHub">
                <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path>
                </svg>
            </a>
              
            </div>
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">How to contribute to Voc4Cat?</a><ul>
<li><a class="reference internal" href="#step-by-step-contribution-guide">Step-by-step contribution guide</a><ul>
<li><a class="reference internal" href="#initial-steps-one-time">Initial steps (one-time)</a><ul>
<li><a class="reference internal" href="#step-1-create-a-github-account">Step 1 – Create a GitHub account</a></li>
<li><a class="reference internal" href="#step-2-access-the-voc4cat-repository">Step 2 – Access the Voc4Cat repository</a></li>
<li><a class="reference internal" href="#step-3-request-an-id-range">Step 3 – Request an ID range</a></li>
<li><a class="reference internal" href="#step-4-fork-the-repository">Step 4 – Fork the repository</a></li>
</ul>
</li>
<li><a class="reference internal" href="#steps-for-every-contribution">Steps for every contribution</a><ul>
<li><a class="reference internal" href="#step-5-get-the-latest-versions">Step 5 – Get the latest versions</a></li>
<li><a class="reference internal" href="#step-6-add-edit-concepts-in-excel">Step 6 – Add / edit concepts in Excel</a></li>
<li><a class="reference internal" href="#step-7-create-iterate-on-the-pull-request">Step 7 – Create &amp; iterate on the Pull Request</a></li>
<li><a class="reference internal" href="#after-merge">After merge</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#contributing-to-the-homepage">Contributing to the homepage</a></li>
<li><a class="reference internal" href="#troubleshooting">Troubleshooting</a></li>
<li><a class="reference internal" href="#questions-or-issues">Questions or issues?</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=46bd48cc"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script>
    <script type="module">import mermaid from "https://cdn.jsdelivr.net/npm/mermaid@11.12.1/dist/mermaid.esm.min.mjs";





const initStyles = () => {
    const defaultStyle = document.createElement('style');
    defaultStyle.textContent = `pre.mermaid {
    /* Same as .mermaid-container > pre */
    display: block;
    width: 100%;
}

pre.mermaid > svg {
    /* Same as .mermaid-container > pre > svg */
    height: 120px;
    width: 100%;
    max-width: 100% !important;
}`;
    document.head.appendChild(defaultStyle);

    const fullscreenStyle = document.createElement('style');
    fullscreenStyle.textContent = `.mermaid-container {
    display: flex;
    flex-direction: row;
    width: 100%;
}

.mermaid-container > pre {
    display: block;
    width: 100%;
}

.mermaid-container > pre > svg {
    height: 120px;
    width: 100%;
    max-width: 100% !important;
}

.mermaid-fullscreen-btn {
    width: 28px;
    height: 28px;
    background: rgba(255, 255, 255, 0.95);
    border: 1px solid rgba(0, 0, 0, 0.3);
    border-radius: 4px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
    font-size: 14px;
    line-height: 1;
    padding: 0;
    color: #333;
}

.mermaid-fullscreen-btn:hover {
    opacity: 100% !important;
    background: rgba(255, 255, 255, 1);
    box-shadow: 0 3px 10px rgba(0, 0, 0, 0.3);
    transform: scale(1.1);
}

.mermaid-fullscreen-btn.dark-theme {
    background: rgba(50, 50, 50, 0.95);
    border: 1px solid rgba(255, 255, 255, 0.3);
    color: #e0e0e0;
}

.mermaid-fullscreen-btn.dark-theme:hover {
    background: rgba(60, 60, 60, 1);
    box-shadow: 0 3px 10px rgba(255, 255, 255, 0.2);
}

.mermaid-fullscreen-modal {
    display: none;
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    width: 95vw;
    height: 100vh;
    background: rgba(255, 255, 255, 0.98);
    z-index: 9999;
    padding: 20px;
    overflow: auto;
}

.mermaid-fullscreen-modal.dark-theme {
    background: rgba(0, 0, 0, 0.98);
}

.mermaid-fullscreen-modal.active {
    display: flex;
    align-items: center;
    justify-content: center;
}

.mermaid-container-fullscreen {
    position: relative;
    width: 95vw;
    height: 90vh;
    max-width: 95vw;
    max-height: 90vh;
    background: white;
    border-radius: 8px;
    padding: 20px;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
    overflow: auto;
    display: flex;
    align-items: center;
    justify-content: center;
}

.mermaid-container-fullscreen.dark-theme {
    background: #1a1a1a;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.8);
}

.mermaid-container-fullscreen pre.mermaid {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
}

.mermaid-container-fullscreen .mermaid svg {
    height: 100% !important;
    width: 100% !important;
    cursor: grab;
}

.mermaid-fullscreen-close {
    position: fixed !important;
    top: 20px !important;
    right: 20px !important;
    width: 40px;
    height: 40px;
    background: rgba(255, 255, 255, 0.95);
    border: 1px solid rgba(0, 0, 0, 0.2);
    border-radius: 50%;
    cursor: pointer;
    z-index: 10000;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    transition: all 0.2s;
    font-size: 24px;
    line-height: 1;
    color: #333;
}

.mermaid-fullscreen-close:hover {
    background: white;
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.4);
    transform: scale(1.1);
}

.mermaid-fullscreen-close.dark-theme {
    background: rgba(50, 50, 50, 0.95);
    border: 1px solid rgba(255, 255, 255, 0.2);
    color: #e0e0e0;
}

.mermaid-fullscreen-close.dark-theme:hover {
    background: rgba(60, 60, 60, 1);
    box-shadow: 0 6px 16px rgba(255, 255, 255, 0.2);
}

.mermaid-fullscreen-modal .mermaid-fullscreen-btn {
    display: none !important;
}`;
    document.head.appendChild(fullscreenStyle);
}

// Detect if page has dark background
const isDarkTheme = () => {
    // We use a set of heuristics:
    // 1. Check for common dark mode classes or attributes
    // 2. Check computed background color brightness
    if (document.documentElement.classList.contains('dark') ||
        document.documentElement.getAttribute('data-theme') === 'dark' ||
        document.body.classList.contains('dark') ||
        document.body.getAttribute('data-theme') === 'dark') {
        // console.log("Dark theme detected via class/attribute");
        return true;
    }
    if (document.documentElement.classList.contains('light') ||
        document.documentElement.getAttribute('data-theme') === 'light' ||
        document.body.classList.contains('light') ||
        document.body.getAttribute('data-theme') === 'light') {
        // console.log("Light theme detected via class/attribute");
        return false;
    }
    if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
        // console.log("Dark theme detected via prefers-color-scheme");
        return true;
    }
    const bgColor = window.getComputedStyle(document.body).backgroundColor;
    const match = bgColor.match(/rgb\((\d+),\s*(\d+),\s*(\d+)/);
    if (match) {
        const r = parseInt(match[1]);
        const g = parseInt(match[2]);
        const b = parseInt(match[3]);
        const brightness = (r * 299 + g * 587 + b * 114) / 1000;
        // console.log("Background color brightness:", brightness);
        return brightness < 128;
    }
    // console.log("No dark or light theme detected, defaulting to light theme");
    return false;
};

let darkTheme = isDarkTheme();
let modal = null;
let modalContent = null;
let previousScrollOffset = [window.scrollX, window.scrollY];

const runMermaid = async (rerun) => {
    console.log("Running mermaid diagrams, rerun =", rerun);
    // clear all existing mermaid charts
    let all_mermaids = document.querySelectorAll(".mermaid");

    if (rerun) {
        all_mermaids.forEach((el) => {
            if(!el.hasAttribute("data-original-code")) {
                // store original code
                // console.log(`Storing original code for first run: `, el.innerHTML);
                el.setAttribute('data-original-code', el.innerHTML);
            }
            if(el.getAttribute("data-processed") === "true") {
                // remove and restore original
                el.removeAttribute("data-processed");
                // console.log(`Restoring original code for re-run: `, el.getAttribute('data-original-code'));
                el.innerHTML = el.getAttribute('data-original-code');
            } else {
                // store original code
                // console.log(`Storing original code for re-run: `, el.innerHTML);
                el.setAttribute('data-original-code', el.innerHTML);
            }
        });
        await mermaid.run();
    }

    all_mermaids = document.querySelectorAll(".mermaid");
    const mermaids_processed = document.querySelectorAll(".mermaid[data-processed='true']");

    if ("False" === "True") {
        const mermaids_to_add_zoom = -1 === -1 ? all_mermaids.length : -1;
        if(mermaids_to_add_zoom > 0) {
            var svgs = d3.selectAll("");
            if(all_mermaids.length !== mermaids_processed.length) {
                setTimeout(() => runMermaid(false), 200);
                return;
            } else if(svgs.size() !== mermaids_to_add_zoom) {
                setTimeout(() => runMermaid(false), 200);
                return;
            } else {
                svgs.each(function() {
                    var svg = d3.select(this);
                    svg.html("<g class='wrapper'>" + svg.html() + "</g>");
                    var inner = svg.select("g");
                    var zoom = d3.zoom().on("zoom", function(event) {
                        inner.attr("transform", event.transform);
                    });
                    svg.call(zoom);
                });
            }
        }
    } else if(all_mermaids.length !== mermaids_processed.length) {
        // Wait for mermaid to process all diagrams
        setTimeout(() => runMermaid(false), 200);
        return;
    }

    // Stop here if not adding fullscreen capability
    if ("True" !== "True") return;

    if (modal !== null ) {
        // Destroy existing modal
        modal.remove();
        modal = null;
        modalContent = null;
    }

    modal = document.createElement('div');
    modal.className = 'mermaid-fullscreen-modal' + (darkTheme ? ' dark-theme' : '');
    modal.setAttribute('role', 'dialog');
    modal.setAttribute('aria-modal', 'true');
    modal.setAttribute('aria-label', 'Fullscreen diagram viewer');
    modal.innerHTML = `
        <button class="mermaid-fullscreen-close${darkTheme ? ' dark-theme' : ''}" aria-label="Close fullscreen">✕</button>
        <div class="mermaid-container-fullscreen${darkTheme ? ' dark-theme' : ''}"></div>
    `;
    document.body.appendChild(modal);

    modalContent = modal.querySelector('.mermaid-container-fullscreen');
    const closeBtn = modal.querySelector('.mermaid-fullscreen-close');

    const closeModal = () => {
        modal.classList.remove('active');
        modalContent.innerHTML = '';
        document.body.style.overflow = ''
        window.scrollTo({left: previousScrollOffset[0], top: previousScrollOffset[1], behavior: 'instant'});
    };

    closeBtn.addEventListener('click', closeModal);
    modal.addEventListener('click', (e) => {
        if (e.target === modal) closeModal();
    });
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && modal.classList.contains('active')) {
            closeModal();
        }
    });

    document.querySelectorAll('.mermaid').forEach((mermaidDiv) => {
        if (mermaidDiv.parentNode.classList.contains('mermaid-container') ||
            mermaidDiv.closest('.mermaid-fullscreen-modal')) {
            // Already processed, adjust button class if needed
            const existingBtn = mermaidDiv.parentNode.querySelector('.mermaid-fullscreen-btn');
            if (existingBtn) {
                existingBtn.className = 'mermaid-fullscreen-btn' + (darkTheme ? ' dark-theme' : '');
            }
            return;
        }

        const container = document.createElement('div');
        container.className = 'mermaid-container';
        mermaidDiv.parentNode.insertBefore(container, mermaidDiv);
        container.appendChild(mermaidDiv);

        const fullscreenBtn = document.createElement('button');
        fullscreenBtn.className = 'mermaid-fullscreen-btn' + (darkTheme ? ' dark-theme' : '');
        fullscreenBtn.setAttribute('aria-label', 'View diagram in fullscreen');
        fullscreenBtn.textContent = '⛶';
        fullscreenBtn.style.opacity = '50%';

        // Calculate dynamic position based on diagram's margin and padding
        const diagramStyle = window.getComputedStyle(mermaidDiv);
        const marginTop = parseFloat(diagramStyle.marginTop) || 0;
        const marginRight = parseFloat(diagramStyle.marginRight) || 0;
        const paddingTop = parseFloat(diagramStyle.paddingTop) || 0;
        const paddingRight = parseFloat(diagramStyle.paddingRight) || 0;
        fullscreenBtn.style.top = `${marginTop + paddingTop + 4}px`;
        fullscreenBtn.style.right = `${marginRight + paddingRight + 4}px`;

        fullscreenBtn.addEventListener('click', () => {
            previousScrollOffset = [window.scroll, window.scrollY];
            const clone = mermaidDiv.cloneNode(true);
            modalContent.innerHTML = '';
            modalContent.appendChild(clone);

            const svg = clone.querySelector('svg');
            if (svg) {
                svg.removeAttribute('width');
                svg.removeAttribute('height');
                svg.style.width = '100%';
                svg.style.height = 'auto';
                svg.style.maxWidth = '100%';
                svg.style.sdisplay = 'block';

                if ("False" === "True") {
                    setTimeout(() => {
                        const g = svg.querySelector('g');
                        if (g) {
                            var svgD3 = d3.select(svg);
                            svgD3.html("<g class='wrapper'>" + svgD3.html() + "</g>");
                            var inner = svgD3.select("g");
                            var zoom = d3.zoom().on("zoom", function(event) {
                                inner.attr("transform", event.transform);
                            });
                            svgD3.call(zoom);
                        }
                    }, 100);
                }
            }

            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        });
        container.appendChild(fullscreenBtn);
    });
};

const load = async () => {
    initStyles();

    await runMermaid(true);

    const reRunIfThemeChanges = async () => {
        const newDarkTheme = isDarkTheme();
        if (newDarkTheme !== darkTheme) {
            darkTheme = newDarkTheme;
            console.log("Theme change detected, re-running mermaid with", darkTheme ? "dark" : "default", "theme");
            await mermaid.initialize(
                {...JSON.parse(
                    `{"startOnLoad": false}`
                ),
                ...{ darkMode: darkTheme, theme: darkTheme ? 'dark' : 'default' },
                }
            );
            await runMermaid(true);
        }
    };

    // Update theme classes when theme changes
    const themeObserver = new MutationObserver(reRunIfThemeChanges);
    themeObserver.observe(document.documentElement, {
        attributes: true,
        attributeFilter: ['class', 'style', 'data-theme']
    });
    themeObserver.observe(document.body, {
        attributes: true,
        attributeFilter: ['class', 'style', 'data-theme']
    });
};





console.log("Initializing mermaid with", darkTheme ? "dark" : "default", "theme");
mermaid.initialize(
    {...JSON.parse(
        `{"startOnLoad": false}`
    ),
    ...{ darkMode: darkTheme, theme: darkTheme ? 'dark' : 'default' },
    }
);

window.addEventListener("load", load);</script>
    </body>
</html>